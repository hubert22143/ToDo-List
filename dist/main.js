(()=>{"use strict";class e{constructor(e){this.name=e,this.tasks=[],this.id=function(){const e=new Uint32Array(2);window.crypto.getRandomValues(e);const t=e[0]*Math.pow(2,32)+e[1];return`${Date.now()}${t}`}()}}class t{static projects=[];static createProject(n){const a=new e(n);return t.projects.push(a),a}static deleteProject(e){const n=t.projects.findIndex((t=>t.name===e));-1!==n&&t.projects.splice(n,1)}static showArray(){console.log(t.projects)}static addTask(e,t){e.tasks.push(t)}}const n=document.querySelector(".errorContainer"),a=document.getElementById("errorButtonStyles"),o=document.querySelector(".CreateProjectContainer");function c(){n.style.display="block",o.style.display="none",a.addEventListener("click",(e=>{e.preventDefault(),n.style.display="none"}))}const s=document.querySelector(".successufullNotificationContainer"),r=document.getElementById("closeButton");function d(){s.style.display="flex",setTimeout((()=>{s.style.display="none"}),5e3),r.addEventListener("click",(()=>{s.style.display="none",console.log("click")}))}function l(e){const t=document.querySelector(".todayPage"),n=document.createElement("table"),a=document.createElement("thead"),o=document.createElement("tr");["ID","Title","Description","startDate","startHour","endDate","endHour","taskPriority"].forEach((e=>{const t=document.createElement("th");t.appendChild(document.createTextNode(e)),o.appendChild(t)})),a.appendChild(o),n.appendChild(a);const c=document.createElement("tbody");(Array.isArray(e)?e:[e]).forEach(((e,t)=>{const n=document.createElement("tr"),a=document.createElement("td");a.appendChild(document.createTextNode(t)),n.appendChild(a);const o=document.createElement("td");o.appendChild(document.createTextNode(e.title)),n.appendChild(o);const s=document.createElement("td");s.appendChild(document.createTextNode(e.description)),n.appendChild(s);const r=document.createElement("td");r.appendChild(document.createTextNode(e.startDate)),n.appendChild(r);const d=document.createElement("td");d.appendChild(document.createTextNode(e.startHour)),n.appendChild(d);const l=document.createElement("td");l.appendChild(document.createTextNode(e.endDate)),n.appendChild(l);const i=document.createElement("td");i.appendChild(document.createTextNode(e.endHour)),n.appendChild(i);const u=document.createElement("td");u.appendChild(document.createTextNode(e.priority)),n.appendChild(u),c.appendChild(n)})),n.appendChild(c),t.appendChild(n)}function i(){let e=t.projects.find((e=>"Default Project"===e.name)).tasks;u(),l(e)}function u(){document.querySelector(".todayPage").innerHTML=""}function m(e){e&&(function(e){const t=document.querySelector(".listOfProjects"),n=document.createElement("div");n.setAttribute("data-project-id",e.id),n.classList.add("default");const a=document.createElement("img");a.src="images/hashtag.png",a.classList.add("stylizedImg");const o=document.createElement("span");o.textContent=e.name,n.appendChild(a),n.appendChild(o),t.appendChild(n),function(e){const t=document.querySelector(".todayPage");e.addEventListener("click",(()=>{t.innerHTML="","Default Project"===event.target.textContent&&i()}))}(n)}(e),function(){const e=document.getElementById("availableProjects");e.innerHTML="";const n=new Set;t.projects.forEach((e=>{n.add(e.name)})),n.forEach((t=>{const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)}))}())}class h{constructor(){this.createProjectImage=document.getElementById("CreateProject"),this.createProjectSubmit=document.getElementById("CreateProjectSubmit"),this.submitButtonProjectValue=document.getElementById("ProjectNameHolder"),this.createProjectContainer=document.querySelector(".CreateProjectContainer"),this.createProjectCancel=document.getElementById("CreateProjectCancel")}handleProjectOpen(){this.createProjectImage.addEventListener("click",(()=>{this.createProjectContainer.style.display="flex"}))}handleProjectCreate(){if(""!==this.submitButtonProjectValue.value){const e=/\d/.test(this.submitButtonProjectValue.value);if(this.submitButtonProjectValue.value.length>=3&&!e){const e=t.createProject(this.submitButtonProjectValue.value);e?(this.createProjectContainer.style.display="none",m(e),d()):c()}else c()}}handleButtonSubmit(){this.createProjectSubmit.addEventListener("click",(e=>{e.preventDefault(),this.handleProjectCreate(),t.showArray()}))}handleProjectCancel(){this.createProjectCancel.addEventListener("click",(()=>{this.createProjectContainer.style.display="none"}))}}class p{constructor(e,t,n,a,o,c,s,r){this.title=e,this.description=t,this.startDate=n,this.startHour=a,this.endDate=o,this.endHour=c,this.priority=s}static createTask(e,t,n,a,o,c,s){return new p(e,t,n,a,o,c,s)}}class y{constructor(){this.title=document.getElementById("TaskNameHolder").value,this.description=document.getElementById("TaskTextArea").value,this.startDate=document.getElementById("TaskDateStart").value,this.startHour=document.getElementById("TaskHourStart").value,this.endDate=document.getElementById("TaskDateEnd").value,this.endHour=document.getElementById("TaskHourEnd").value,this.taskPriority=document.getElementById("taskPriority").value,this.selectedProjectName=document.getElementById("availableProjects").value}assignValuesToProject(){const e=p.createTask(this.title,this.description,this.startDate,this.startHour,this.endDate,this.endHour,this.taskPriority);console.log(e);const n=t.projects.find((e=>e.name===this.selectedProjectName));console.log(n),n?(t.addTask(n,e),t.showArray()):console.log("Some ugly error occured")}}function C(e){if("Default Project"!==e){let n=t.projects;console.log(n);let a=n.find((t=>t.name===e));a?l(a.tasks):console.log("Current project not found")}else i()}class j{constructor(){this.createTaskImage=document.getElementById("createTask"),this.createTaskSubmit=document.getElementById("CreateTaskSubmit"),this.submitButtonTaskValue=document.getElementById("TaskNameHolder"),this.createTaskContainer=document.querySelector(".CreateTaskContainer"),this.createTaskCancel=document.getElementById("CreateTaskCancel"),this.defaultProjectName="Default Project",this.availableProjectsSelect=document.getElementById("availableProjects")}handleTaskOpen(){this.createTaskImage.addEventListener("click",(()=>{this.createTaskContainer.style.display="flex",s.style.display="none",console.log("click")}))}taskButtonSubmit(){this.createTaskSubmit.addEventListener("click",(e=>{e.preventDefault(),console.log(this.submitButtonTaskValue.value),this.createTaskContainer.style.display="none",(new y).assignValuesToProject(),d(),this.defaultProjectName===this.availableProjectsSelect.value?i():(console.log("The else is donig"),document.querySelectorAll(".default").forEach((e=>{const t=e.querySelector("span").textContent;console.log(t),u(),C(t),e.addEventListener("click",(()=>{u(),C(t)}))})))}))}handleTaskCancel(){this.createTaskCancel.addEventListener("click",(()=>{this.createTaskContainer.style.display="none"}))}}let k=document.querySelector(".todayPage").innerHTML;document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=new h;e.handleProjectOpen(),e.handleButtonSubmit(),e.handleProjectCancel()}(),function(){const e=new j;e.handleTaskOpen(),e.taskButtonSubmit(),e.handleTaskCancel()}(),function(e){if(e){const n=t.createProject(e);if(n){const e=p.createTask("Default Task","Default description","2024-01-15","12:00","2024-01-16","14:00","Medium");t.addTask(n,e),m(n)}}}("Default Project")})),document.querySelector(".dailyTasks").addEventListener("click",(()=>{document.querySelector(".todayPage").innerHTML=k}))})();